import{g as d,S as h}from"./animation-CSo1E1N-.js";import{E as L,C as b}from"./Experience-k44GAHeM.js";d.registerPlugin(h);const w=document.querySelector("canvas.webgl"),n=new L(w);let u=n.world.particles;const a=n.world.stage;let l=null;function g(e){document.querySelectorAll(e).forEach(t=>t.classList.add("hide"))}function m(e){document.querySelectorAll(e).forEach(t=>t.classList.remove("hide"))}function f(e){return`stage-${{1:"one",2:"two",3:"three",4:"four"}[e]}`}const C={1:"#CCB7C4",2:"#997D92",3:"#776273",4:"#211d20"};function y(e){e?n.scene.background=new b(e):n.scene.background=null}function k(e){document.querySelectorAll(".canvas.stages").forEach(s=>s.classList.remove("visible"));const t=`.canvas.stages.${f(e)}`,o=document.querySelector(t);o?(o.classList.add("visible"),l=e,console.log(`Stage section for stage ${e} shown.`),y(C[e])):console.error(`Stage section for stage ${e} not found.`)}function v(e){const t=`.canvas.stages.${f(e)}`,o=document.querySelector(t);o&&(o.classList.remove("visible"),console.log(`Stage section for stage ${e} hidden.`),l=null)}function q(){console.log("Destroying particles..."),u.destroy()}function c(e){g(".show-initial"),g("section.scroll"),q(),l!==null&&v(l),a.loadStage(e),k(e);const t=document.querySelector(".whole-model");if(t&&a.initialCameraPosition){const{x:o,y:s,z:r}=a.initialCameraPosition;t.setAttribute("data-camera-position",`${o},${s},${r}`)}n.renderer.instance.compile(a.scene,n.camera.instance)}function B(){console.log("Destroying current stage..."),a.destroy(),l!==null&&v(l)}document.querySelectorAll(".go-back").forEach(e=>{e.addEventListener("click",()=>{S(),a.resetStage(),B(),m(".show-initial"),m("section.scroll"),y(null),document.querySelectorAll(".stages-section ul li").forEach(s=>s.classList.remove("active")),document.querySelectorAll(".whole-model").forEach(s=>s.classList.add("active"));const t=event.target.getAttribute("data-section"),o=document.querySelector(`#${t}`);o&&o.scrollIntoView({behavior:"smooth",block:"start"})})});n.world.resources.on("ready",()=>{console.log("Resources loaded, initializing event listeners..."),u=n.world.particles,document.getElementById("button-stage-1").addEventListener("click",()=>c(1)),document.getElementById("button-stage-2").addEventListener("click",()=>c(2)),document.getElementById("button-stage-3").addEventListener("click",()=>c(3)),document.getElementById("button-stage-4").addEventListener("click",()=>c(4))});document.querySelectorAll(".stages-section ul li").forEach(e=>{e.addEventListener("click",t=>{const o=t.target.getAttribute("data-camera-position");if(e.classList.contains("whole-model"))S();else if(o){const[s,r,p]=o.split(",").map(Number);$(s,r,p)}})});function $(e,t,o){d.to(n.camera.instance.position,{x:e,y:t,z:o,duration:1.5,ease:"power3.inOut",onUpdate:()=>{n.camera.controls.update()},onComplete:()=>{console.log(`Camera moved to position: (${e}, ${t}, ${o})`)}})}document.querySelectorAll(".stages-section ul li").forEach(e=>{e.addEventListener("click",t=>{document.querySelectorAll(".stages-section ul li").forEach(o=>o.classList.remove("active")),t.target.classList.add("active")})});function S(){d.to(n.camera.instance.position,{x:-15,y:0,z:1.5,duration:1.5,ease:"power3.inOut",onUpdate:()=>{n.camera.controls.update()},onComplete:()=>{console.log("Camera reset to initial position.")}})}const E=document.getElementById("loading-screen"),i=document.getElementById("enter-button");i.disabled=!0;n.world.resources.on("ready",()=>{console.log("Resources loaded, enabling Enter button..."),i.disabled=!1,i.classList.add("enabled"),i.textContent="Erkunden"});i.addEventListener("click",()=>{i.disabled||(console.log("User clicked Enter, starting experience..."),E.classList.add("fade-out"),setTimeout(()=>{E.style.display="none"},500),A())});function A(){u=n.world.particles,document.getElementById("button-stage-1").addEventListener("click",()=>c(1)),document.getElementById("button-stage-2").addEventListener("click",()=>c(2)),document.getElementById("button-stage-3").addEventListener("click",()=>c(3)),document.getElementById("button-stage-4").addEventListener("click",()=>c(4))}
//# sourceMappingURL=main-D-ojyEB2.js.map
