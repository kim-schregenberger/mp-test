{"version":3,"file":"main-D-ojyEB2.js","sources":["../../src/script.js"],"sourcesContent":["import * as THREE from 'three'\nimport Experience from './Experience/Experience.js';\nimport { gsap } from \"gsap\"; \nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\n\n\ngsap.registerPlugin(ScrollTrigger);\n\n\n\nconst canvas = document.querySelector('canvas.webgl');\nconst experience = new Experience(canvas);\n\nlet particles = experience.world.particles;  // Will be updated after `resources.on('ready')`\nconst stages = experience.world.stage;\n\nlet currentStageNumber = null;\n\nfunction hideElements(selector) {\n    document.querySelectorAll(selector).forEach((el) => el.classList.add('hide'));\n}\n\nfunction showElements(selector) {\n    document.querySelectorAll(selector).forEach((el) => el.classList.remove('hide'));\n}\n\n// Color of Stages\nfunction getStageClass(stageNumber) {\n    const stageMap = {\n        1: 'one',\n        2: 'two',\n        3: 'three',\n        4: 'four'\n    };\n    return `stage-${stageMap[stageNumber]}`;\n}\n\nconst stageColors = {\n    1: '#CCB7C4', \n    2: '#997D92', \n    3: '#776273',  \n    4: '#211d20'\n    // initial: '#211d20' \n};\n\nfunction changeSceneBackgroundColor(color) {\n    if (color) {\n        experience.scene.background = new THREE.Color(color); // Set solid color\n    } else {\n        experience.scene.background = null; // Set transparent\n    }\n}\n\n\n// Show Stage\nfunction showStageSection(stageNumber) {\n    document.querySelectorAll('.canvas.stages').forEach((stage) => stage.classList.remove('visible'));\n    \n    const stageClass = `.canvas.stages.${getStageClass(stageNumber)}`;\n    const stageElement = document.querySelector(stageClass);\n    if (stageElement) {\n        stageElement.classList.add('visible');\n        currentStageNumber = stageNumber;\n        console.log(`Stage section for stage ${stageNumber} shown.`);\n        \n        // Change the canvas background color\n        changeSceneBackgroundColor(stageColors[stageNumber]);\n    } else {\n        console.error(`Stage section for stage ${stageNumber} not found.`);\n    }\n}\n\n\n// Hide Stage\nfunction hideStageSection(stageNumber) {\n    const stageClass = `.canvas.stages.${getStageClass(stageNumber)}`;\n    const stageElement = document.querySelector(stageClass);\n    if (stageElement) {\n        stageElement.classList.remove('visible');\n        console.log(`Stage section for stage ${stageNumber} hidden.`);\n        currentStageNumber = null;\n    }\n}\n\n// Destroy Particles\nfunction destroyParticles() {\n    console.log('Destroying particles...');\n    particles.destroy(); \n}\n\n\n// Load Stage\nfunction loadStage(stageNumber) {\n    hideElements('.show-initial');\n    hideElements('section.scroll');\n    destroyParticles();  // Destroy particles instead of just hiding\n\n    if (currentStageNumber !== null) {\n        hideStageSection(currentStageNumber);\n    }\n\n    stages.loadStage(stageNumber);\n    showStageSection(stageNumber);\n\n    const wholeModelLi = document.querySelector('.whole-model');\n    if (wholeModelLi && stages.initialCameraPosition) {\n        const { x, y, z } = stages.initialCameraPosition;\n        wholeModelLi.setAttribute('data-camera-position', `${x},${y},${z}`);\n    }\n\n    experience.renderer.instance.compile(stages.scene, experience.camera.instance);\n}\n\n// Destroy Stage\nfunction destroyStage() {\n    console.log('Destroying current stage...');\n    stages.destroy();\n\n    if (currentStageNumber !== null) {\n        hideStageSection(currentStageNumber);\n    }\n}\n\n\n// Leave Stage and go back to Particles\ndocument.querySelectorAll('.go-back').forEach((button) => {\n    button.addEventListener('click', () => {\n        resetCameraPosition()\n        stages.resetStage();\n        destroyStage();\n        showElements('.show-initial');\n        showElements('section.scroll');\n        \n        // Reset the canvas to the initial color\n        changeSceneBackgroundColor(null);\n\n        document.querySelectorAll('.stages-section ul li').forEach((el) => el.classList.remove('active'));\n        document.querySelectorAll('.whole-model').forEach((el) => el.classList.add('active'));\n\n        // Scroll to a specific section\n        const sectionId = event.target.getAttribute('data-section');\n        const targetSection = document.querySelector(`#${sectionId}`);\n        if (targetSection) {\n            targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n    });\n});\n\n\n// Load resources and initialize event listeners\nexperience.world.resources.on('ready', () => {\n    console.log('Resources loaded, initializing event listeners...');\n    particles = experience.world.particles;  // Ensure particles is set after resources are loaded\n\n    document.getElementById('button-stage-1').addEventListener('click', () => loadStage(1));\n    document.getElementById('button-stage-2').addEventListener('click', () => loadStage(2));\n    document.getElementById('button-stage-3').addEventListener('click', () => loadStage(3));\n    document.getElementById('button-stage-4').addEventListener('click', () => loadStage(4));\n});\n\n\n\n\n\n// Stages Camera move\ndocument.querySelectorAll('.stages-section ul li').forEach((item) => {\n    item.addEventListener('click', (event) => {\n        const cameraPosition = event.target.getAttribute('data-camera-position');\n        if (item.classList.contains('whole-model')) {\n            resetCameraPosition(); // Reset the model and camera to initial state\n        } else if (cameraPosition) {\n            const [x, y, z] = cameraPosition.split(',').map(Number);\n            moveCameraToPosition(x, y, z);\n        }\n    });\n});\n\n\nfunction moveCameraToPosition(x, y, z) {\n    const duration = 1.5; // Animation duration in seconds\n    gsap.to(experience.camera.instance.position, {\n        x: x,\n        y: y,\n        z: z,\n        duration: duration,\n        ease: \"power3.inOut\",\n        onUpdate: () => {\n            experience.camera.controls.update(); // Ensure controls are updated during the transition\n        },\n        onComplete: () => {\n            console.log(`Camera moved to position: (${x}, ${y}, ${z})`);\n        }\n    });\n}\n\ndocument.querySelectorAll('.stages-section ul li').forEach((item) => {\n    item.addEventListener('click', (event) => {\n        // Remove active class from all items\n        document.querySelectorAll('.stages-section ul li').forEach((el) => el.classList.remove('active'));\n\n        // Add active class to clicked item\n        event.target.classList.add('active');\n    });\n});\n\nfunction resetCameraPosition() {\n    gsap.to(experience.camera.instance.position, {\n        x: -15,\n        y: 0,\n        z: 1.5,\n        duration: 1.5,\n        ease: \"power3.inOut\",\n        onUpdate: () => {\n            experience.camera.controls.update(); // Ensure controls are updated during the transition\n        },\n        onComplete: () => {\n            console.log(\"Camera reset to initial position.\");\n        }\n    });\n}\n\n\n\n// Loading screen\n\nconst loadingScreen = document.getElementById('loading-screen');\nconst enterButton = document.getElementById('enter-button');\n\n// Keep the Enter button visible but disabled initially\nenterButton.disabled = true;\n\n// Once resources are ready, enable the Enter button\nexperience.world.resources.on('ready', () => {\n    console.log('Resources loaded, enabling Enter button...');\n    \n    // Update button state\n    enterButton.disabled = false;\n    enterButton.classList.add('enabled');\n    enterButton.textContent = 'Erkunden'\n});\n\n// Add event listener for the Enter button\nenterButton.addEventListener('click', () => {\n    if (!enterButton.disabled) {\n        console.log('User clicked Enter, starting experience...');\n\n        // Fade out the loading screen\n        loadingScreen.classList.add('fade-out');\n        setTimeout(() => {\n            loadingScreen.style.display = 'none';\n        }, 500); // Match the transition duration\n\n        // Initialize the experience\n        initializeExperience();\n    }\n});\n\n// Function to initialize the experience\nfunction initializeExperience() {\n    // Add event listeners and start experience\n    particles = experience.world.particles; // Ensure particles is set after resources are loaded\n    document.getElementById('button-stage-1').addEventListener('click', () => loadStage(1));\n    document.getElementById('button-stage-2').addEventListener('click', () => loadStage(2));\n    document.getElementById('button-stage-3').addEventListener('click', () => loadStage(3));\n    document.getElementById('button-stage-4').addEventListener('click', () => loadStage(4));\n}\n"],"names":["gsap","ScrollTrigger","canvas","experience","Experience","particles","stages","currentStageNumber","hideElements","selector","el","showElements","getStageClass","stageNumber","stageColors","changeSceneBackgroundColor","color","THREE.Color","showStageSection","stage","stageClass","stageElement","hideStageSection","destroyParticles","loadStage","wholeModelLi","x","y","z","destroyStage","button","resetCameraPosition","sectionId","targetSection","item","event","cameraPosition","moveCameraToPosition","loadingScreen","enterButton","initializeExperience"],"mappings":"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"}